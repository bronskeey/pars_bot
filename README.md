# RCOI pars. bot

**_Основная идея:_**
В папке проекта есть две составляющих: телеграм бот и парсер. 
Телеграм бот обладает функцией запуска парсера каждые 24 часа после инициализации. 
Парсер анализирует файлы на сайте РЦОИ МЦКО http://rcoi.mcko.ru/ в разделах "Оперативная информация" и "Методические материалы",
сверяет их с предыдущими данными: списком файлов и списком last modified по всем файлам. Если находится разница, файлы скачиваются, 
отсылаются ботом в чат, в котором он был инициализирован, вместе со статусными сообщениями.

# **Бот + Парсер v0.01**

1.08.2021

**1. Добавлено**

- Базовые функции для бота, использован первый попавшийся.
- Сделана первая версия парсера, добавлен раздел "Оперативная информация", парсер скачивает разницу в рабочую диркеторию
- Связь бота и парсера, бот присылает сообщения об успешном скачивании.

# **Бот + Парсер v0.02**


12.08.2021

**1. Добавлено:**

bot_main.py
1) После выполнения парсера бот теперь отправляет сами файлы, а не текст.
2) Бот добавлен в группу, в которую присылает результат работы парсера. В группе бот может быть запущен только владельцем.
3) Бот теперь присылает "No new updates" сообщения в тихом режиме.
4) Сообщения "No new updates" теперь содержат информацию о том, на какой странице был выполнен парсинг(список страниц и их обозначения в самом конце).

**2. Исправлено:**

pars_main.py
1) Исправлено логирование в связи с введением новых обозначений.
2) Получение имён в 'download_files'.

**3. Убрано:**

1) Из бота убрана масса лишних функций, таких как большие кнопки, команда 'help'(временно) и т.д.

**4. Прочие минорные изменения.**

*Список страниц и их обозначения в логах:*
1) [gia-11] [info] - 'http://rcoi.mcko.ru/organizers/info/gia-11/'
2) [gia-9] [info]  - 'http://rcoi.mcko.ru/organizers/info/gia-9/'
3) [ege] [meth]    - 'http://rcoi.mcko.ru/organizers/methodological-materials/ege/'
4) [gia-9] [meth]  - 'http://rcoi.mcko.ru/organizers/methodological-materials/gia-9/'

* пункты 3 и 4, как и обозначения 'info' и 'meth' добавлены в v0.02


# **Бот + Парсер v0.03**

13.12.2021

**1. Исправлено:**

bot_main.py
1) Перенёс сюда логику, переписал отправку сообщений и файлов.
2) По мелочи переписал всё, предыдущая версия была просто плохой.

pars_main.py
1) Переписал целиком.


# **Бот + Парсер v0.04**

01.01.2022

**1. Добавлено:**

1) Команды для администрирования: /_start, /_stop, /_get, /_get_logs, /_clean_files
1) Нормальное логирование в файлы

**2. Изменено:**

1) Команды /help, /start
2) Переехал на свой айди
3) Перевёл все комментарии и TODO на русский
4) Мелкий рефакторинг некоторых функций
5) Переписал общение бота с парсером

**3. Удалено:**

1) Команды /random, /pars
2) всякие принты с информацией
